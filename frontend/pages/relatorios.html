<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Planeta Água - Relatórios</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" />
    <link rel="stylesheet" href="../assets/css/style.css" />
    <link rel="stylesheet" href="../assets/css/relatorio.css" />

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <i class="bi bi-droplet-fill fs-4"></i>
            <h4>Planeta Água</h4>
        </div>
        <ul class="nav flex-column mt-4">
            <li class="nav-item"><a class="nav-link" href="index.html"><i class="bi bi-speedometer2"></i><span
                        class="nav-text">Dashboard</span></a></li>
            <li class="nav-item"><a class="nav-link" href="vendas.html"><i class="bi bi-cash-coin"></i><span
                        class="nav-text">Vendas</span></a></li>
            <li class="nav-item"><a class="nav-link" href="clientes.html"><i class="bi bi-people"></i><span
                        class="nav-text">Clientes</span></a></li>
            <li class="nav-item"><a class="nav-link" href="produtos.html"><i class="bi bi-box-seam"></i><span
                        class="nav-text">Produtos</span></a></li>
            <li class="nav-item"><a class="nav-link" href="usuarios.html"><i class="bi bi-person-badge"></i><span
                        class="nav-text">Usuários</span></a></li>
            <li class="nav-item"><a class="nav-link active" href="relatorios.html"><i class="bi bi-bar-chart"></i><span
                        class="nav-text">Relatórios</span></a></li>
        </ul>
        <div class="sidebar-footer">
            <a class="nav-link" href="login.html"><i class="bi bi-box-arrow-left"></i><span
                    class="nav-text">Sair</span></a>
        </div>
    </div>

    <!-- Sidebar Toggle -->
    <button class="sidebar-toggle" id="sidebarToggle"><i class="bi bi-list"></i></button>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <div class="container-fluid">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2 class="mb-0">Relatórios</h2>
                <button class="btn btn-primary d-lg-none" id="mobileMenuBtn"><i class="bi bi-list"></i></button>
            </div>

            <!-- Abas PRINCIPAIS (Vendas | Estoque) -->
            <ul class="nav nav-tabs mb-4" id="tabsPrincipais" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="tab-vendas" data-bs-toggle="tab" data-bs-target="#pane-vendas"
                        type="button" role="tab" aria-controls="pane-vendas" aria-selected="true">
                        <i class="bi bi-graph-up-arrow me-1"></i> Vendas
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="tab-estoque" data-bs-toggle="tab" data-bs-target="#pane-estoque"
                        type="button" role="tab" aria-controls="pane-estoque" aria-selected="false">
                        <i class="bi bi-box-seam me-1"></i> Estoque
                    </button>
                </li>
            </ul>

            <div class="tab-content">
                <!-- =================== VENDAS =================== -->
                <div class="tab-pane fade show active" id="pane-vendas" role="tabpanel" aria-labelledby="tab-vendas">
                    <div class="card" id="vendasReport">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h4 class="mb-0">Relatório de Vendas</h4>
                        </div>
                        <div class="card-body">
                            <!-- Sub-abas Vendas -->
                            <ul class="nav nav-tabs mb-4" id="vendasTabs">
                                <li class="nav-item"><a class="nav-link active" id="diario-tab" data-bs-toggle="tab"
                                        href="#diario">Diário</a></li>
                                <li class="nav-item"><a class="nav-link" id="mensal-tab" data-bs-toggle="tab"
                                        href="#mensal">Mensal</a></li>
                                <li class="nav-item"><a class="nav-link" id="anual-tab" data-bs-toggle="tab"
                                        href="#anual">Anual</a></li>
                                <li class="nav-item"><a class="nav-link" id="personalizado-tab" data-bs-toggle="tab"
                                        href="#personalizado">Personalizado</a></li>
                            </ul>

                            <div class="tab-content">
                                <!-- Diário -->
                                <div class="tab-pane fade show active" id="diario">
                                    <div class="filter-section mb-4">
                                        <div class="row g-3 align-items-end">
                                            <div class="col-md-4">
                                                <label for="dataVendaDiaria" class="form-label">Data</label>
                                                <input type="date" class="form-control" id="dataVendaDiaria" />
                                            </div>
                                            <div class="col-md-4">
                                                <label for="vendedorVendasDiario" class="form-label">Vendedor</label>
                                                <select class="form-select" id="vendedorVendasDiario">
                                                    <option value="todos" selected>Todos os vendedores</option>
                                                </select>
                                            </div>
                                            <div class="col-md-4">
                                                <button class="btn btn-primary w-100" id="gerarRelatorioDiario">
                                                    <i class="bi bi-search me-1"></i> Gerar Relatório
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <div id="relatorioDiarioGerado">
                                        <div class="daily-report-header">
                                            <div class="daily-report-date">Vendas do dia <span
                                                    id="dataRelatorio"></span></div>
                                            <button type="button" class="btn btn-outline-primary print-btn"
                                                onclick="window.imprimirRelatorio()">
                                                <i class="bi bi-printer"></i> Imprimir
                                            </button>
                                        </div>

                                        <div class="row mb-4">
                                            <div class="col-md-3">
                                                <div class="summary-card position-relative">
                                                    <i class="bi bi-cash-coin summary-icon"></i>
                                                    <div class="summary-title">Faturamento do Dia</div>
                                                    <div class="summary-value" id="faturamentoDia">—</div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="summary-card position-relative">
                                                    <i class="bi bi-cart-check summary-icon"></i>
                                                    <div class="summary-title">Total de Vendas</div>
                                                    <div class="summary-value" id="totalVendas">—</div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="summary-card position-relative">
                                                    <i class="bi bi-currency-dollar summary-icon"></i>
                                                    <div class="summary-title">Ticket Médio</div>
                                                    <div class="summary-value" id="ticketMedio">—</div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="summary-card position-relative">
                                                    <i class="bi bi-people summary-icon"></i>
                                                    <div class="summary-title">Clientes Atendidos</div>
                                                    <div class="summary-value" id="clientesAtendidos">—</div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="card mb-4">
                                            <div class="card-header">
                                                <h5 class="mb-0">Produtos Vendidos</h5>
                                            </div>
                                            <div class="card-body">
                                                <div id="produtosVendidosContainer"></div>
                                                <div class="total-section">
                                                    <div class="total-label">Total do Dia</div>
                                                    <div class="total-value" id="totalDiaVendas">—</div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0">Detalhamento de Vendas</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="table-container">
                                                    <table class="table">
                                                        <thead>
                                                            <tr>
                                                                <th>Hora</th>
                                                                <th>Cliente</th>
                                                                <th>Produtos</th>
                                                                <th>Vendedor</th>
                                                                <th>Forma de Pagamento</th>
                                                                <th class="text-end">Valor</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody id="tabelaVendasBody"></tbody>
                                                        <tfoot>
                                                            <tr class="table-light">
                                                                <td colspan="5" class="text-end fw-bold">Total</td>
                                                                <td class="text-end fw-bold" id="totalTabelaVendas">—
                                                                </td>
                                                            </tr>
                                                        </tfoot>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Mensal -->
                                <div class="tab-pane fade" id="mensal">
                                    <div class="filter-section mb-4">
                                        <div class="row g-3 align-items-end">
                                            <div class="col-md-4">
                                                <label for="mesVendaMensal" class="form-label">Mês</label>
                                                <select class="form-select" id="mesVendaMensal">
                                                    <option value="1">Janeiro</option>
                                                    <option value="2">Fevereiro</option>
                                                    <option value="3">Março</option>
                                                    <option value="4">Abril</option>
                                                    <option value="5">Maio</option>
                                                    <option value="6">Junho</option>
                                                    <option value="7">Julho</option>
                                                    <option value="8">Agosto</option>
                                                    <option value="9">Setembro</option>
                                                    <option value="10">Outubro</option>
                                                    <option value="11">Novembro</option>
                                                    <option value="12">Dezembro</option>
                                                </select>
                                            </div>
                                            <div class="col-md-4">
                                                <label for="anoVendaMensal" class="form-label">Ano</label>
                                                <select class="form-select" id="anoVendaMensal">
                                                    <option value="2025" selected>2025</option>
                                                    <option value="2024">2024</option>
                                                    <option value="2023">2023</option>
                                                </select>
                                            </div>
                                            <div class="col-md-4">
                                                <button class="btn btn-primary w-100" id="gerarRelatorioMensal">
                                                    <i class="bi bi-search me-1"></i> Gerar Relatório
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <div id="relatorioMensalGerado">
                                        <div class="daily-report-header">
                                            <div class="daily-report-date">Vendas de <span id="mesAnoRelatorio"></span>
                                            </div>
                                            <button type="button" class="btn btn-outline-primary print-btn"
                                                onclick="window.imprimirRelatorio()">
                                                <i class="bi bi-printer"></i> Imprimir
                                            </button>
                                        </div>

                                        <div class="row mb-4">
                                            <div class="col-md-3">
                                                <div class="summary-card position-relative">
                                                    <i class="bi bi-cash-coin summary-icon"></i>
                                                    <div class="summary-title">Faturamento do Mês</div>
                                                    <div class="summary-value" id="faturamentoMes">—</div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="summary-card position-relative">
                                                    <i class="bi bi-cart-check summary-icon"></i>
                                                    <div class="summary-title">Total de Vendas</div>
                                                    <div class="summary-value" id="totalVendasMes">—</div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="summary-card position-relative">
                                                    <i class="bi bi-currency-dollar summary-icon"></i>
                                                    <div class="summary-title">Ticket Médio</div>
                                                    <div class="summary-value" id="ticketMedioMes">—</div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="summary-card position-relative">
                                                    <i class="bi bi-people summary-icon"></i>
                                                    <div class="summary-title">Novos Clientes</div>
                                                    <div class="summary-value" id="novosClientesMes">—</div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="card mb-4">
                                            <div class="card-header">
                                                <h5 class="mb-0">Evolução de Vendas no Mês</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="chart-container">
                                                    <canvas id="vendasMensalChart"></canvas>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="card mb-4">
                                            <div class="card-header">
                                                <h5 class="mb-0">Produtos Vendidos no Mês</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="chart-container">
                                                            <canvas id="produtosMensalChart"></canvas>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="table-container">
                                                            <table class="table">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Produto</th>
                                                                        <th>Quantidade</th>
                                                                        <th class="text-end">Valor</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody id="tabelaProdutosMensalBody"></tbody>
                                                                <tfoot>
                                                                    <tr class="table-light">
                                                                        <td colspan="2" class="text-end fw-bold">Total
                                                                        </td>
                                                                        <td class="text-end fw-bold"
                                                                            id="totalProdutosMensal">—</td>
                                                                    </tr>
                                                                </tfoot>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                                <!-- Anual -->
                                <div class="tab-pane fade" id="anual">
                                    <div class="filter-section mb-4">
                                        <div class="row g-3 align-items-end">
                                            <div class="col-md-6">
                                                <label for="anoVendaAnual" class="form-label">Ano</label>
                                                <select class="form-select" id="anoVendaAnual">
                                                    <option value="2025" selected>2025</option>
                                                    <option value="2024">2024</option>
                                                    <option value="2023">2023</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <button class="btn btn-primary w-100" id="gerarRelatorioAnual">
                                                    <i class="bi bi-search me-1"></i> Gerar Relatório
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="relatorioAnualGerado"></div>
                                </div>

                                <!-- Personalizado -->
                                <div class="tab-pane fade" id="personalizado">
                                    <div class="filter-section mb-4">
                                        <div class="row g-3 align-items-end">
                                            <div class="col-md-4">
                                                <label for="dataInicio" class="form-label">Data Inicial</label>
                                                <input type="date" class="form-control" id="dataInicio" />
                                            </div>
                                            <div class="col-md-4">
                                                <label for="dataFim" class="form-label">Data Final</label>
                                                <input type="date" class="form-control" id="dataFim" />
                                            </div>
                                            <div class="col-md-4">
                                                <button class="btn btn-primary w-100" id="gerarRelatorioPersonalizado">
                                                    <i class="bi bi-search me-1"></i> Gerar Relatório
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="relatorioPersonalizadoGerado"></div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>

                <!-- =================== ESTOQUE =================== -->
                <div class="tab-pane fade" id="pane-estoque" role="tabpanel" aria-labelledby="tab-estoque">
                    <div class="card" id="estoqueReport">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h4 class="mb-0">Relatório de Estoque</h4>
                        </div>
                        <div class="card-body">
                            <!-- Sub-abas Estoque -->
                            <ul class="nav nav-tabs mb-4" id="estoqueTabs">
                                <li class="nav-item"><a class="nav-link active" id="atual-tab" data-bs-toggle="tab"
                                        href="#atual">Estoque Atual</a></li>
                                <li class="nav-item"><a class="nav-link" id="movimentacao-tab" data-bs-toggle="tab"
                                        href="#movimentacao">Movimentação</a></li>

                            </ul>

                            <div class="tab-content">
                                <!-- Estoque Atual -->
                                <div class="tab-pane fade show active" id="atual">
                                    <div class="filter-section mb-4">
                                        <div class="row g-3">
                                            <div class="col-md-4">
                                                <label for="categoriaEstoqueAtual" class="form-label">Categoria</label>
                                                <select class="form-select" id="categoriaEstoqueAtual">
                                                    <option value="todos" selected>Todas as categorias</option>
                                                </select>
                                            </div>
                                            <div class="col-md-4">
                                                <label for="statusEstoqueAtual" class="form-label">Status de
                                                    Estoque</label>
                                                <select class="form-select" id="statusEstoqueAtual">
                                                    <option value="todos" selected>Todos os status</option>
                                                    <option value="baixo">Estoque Baixo</option>
                                                    <option value="normal">Estoque Normal</option>
                                                    <option value="alto">Estoque Alto</option>
                                                </select>
                                            </div>
                                            <div class="col-md-4">
                                                <button class="btn btn-primary w-100" id="gerarRelatorioEstoqueAtual">
                                                    <i class="bi bi-search me-1"></i> Gerar Relatório
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <div id="relatorioEstoqueAtualGerado">
                                        <div class="daily-report-header">
                                            <div class="daily-report-date">Estoque Atual - <span
                                                    id="dataEstoqueAtual"></span></div>
                                            <button type="button" class="btn btn-outline-primary print-btn"
                                                onclick="window.imprimirRelatorio()">
                                                <i class="bi bi-printer"></i> Imprimir
                                            </button>
                                        </div>

                                        <div class="row mb-4">
                                            <div class="col-md-3">
                                                <div class="summary-card position-relative"><i
                                                        class="bi bi-box-seam summary-icon"></i>
                                                    <div class="summary-title">Total de Produtos</div>
                                                    <div class="summary-value" id="totalProdutosEstoque">—</div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="summary-card position-relative"><i
                                                        class="bi bi-exclamation-triangle summary-icon"></i>
                                                    <div class="summary-title">Estoque Baixo</div>
                                                    <div class="summary-value" id="estoqueBaixo">—</div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="summary-card position-relative"><i
                                                        class="bi bi-calendar-x summary-icon"></i>
                                                    <div class="summary-title">Próximos a Vencer</div>
                                                    <div class="summary-value" id="proximosVencer">—</div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="summary-card position-relative"><i
                                                        class="bi bi-currency-dollar summary-icon"></i>
                                                    <div class="summary-title">Valor em Estoque</div>
                                                    <div class="summary-value" id="valorEstoque">—</div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0">Produtos em Estoque</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="table-container">
                                                    <table class="table">
                                                        <thead>
                                                            <tr>
                                                                <th>Produto</th>
                                                                <th>Categoria</th>
                                                                <th>Quantidade</th>
                                                                <th>Validade</th>
                                                                <th>Status</th>
                                                                <th class="text-end">Valor Total</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody id="tabelaEstoqueBody"></tbody>
                                                        <tfoot>
                                                            <tr class="table-light">
                                                                <td colspan="5" class="text-end fw-bold">Total</td>
                                                                <td class="text-end fw-bold" id="totalValorEstoque">—
                                                                </td>
                                                            </tr>
                                                        </tfoot>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Movimentação -->
                                <div class="tab-pane fade" id="movimentacao">
                                    <div class="filter-section mb-4">
                                        <div class="row g-3">
                                            <div class="col-md-4"><label for="dataInicioMovimentacao"
                                                    class="form-label">Data Inicial</label><input type="date"
                                                    class="form-control" id="dataInicioMovimentacao" /></div>
                                            <div class="col-md-4"><label for="dataFimMovimentacao"
                                                    class="form-label">Data Final</label><input type="date"
                                                    class="form-control" id="dataFimMovimentacao" /></div>
                                            <div class="col-md-4"><button class="btn btn-primary w-100"
                                                    id="gerarRelatorioMovimentacao"><i class="bi bi-search me-1"></i>
                                                    Gerar Relatório</button></div>
                                        </div>
                                    </div>

                                    <div id="relatorioMovimentacaoGerado">
                                        <div class="daily-report-header">
                                            <div class="daily-report-date">Movimentação de Estoque - <span
                                                    id="periodoMovimentacao"></span></div>
                                            <button type="button" class="btn btn-outline-primary print-btn"
                                                onclick="window.imprimirRelatorio()">
                                                <i class="bi bi-printer"></i> Imprimir
                                            </button>
                                        </div>

                                        <div class="row mb-4">
                                            <div class="col-md-3">
                                                <div class="summary-card position-relative"><i
                                                        class="bi bi-box-arrow-in-down summary-icon"></i>
                                                    <div class="summary-title">Entradas</div>
                                                    <div class="summary-value" id="totalEntradas">—</div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="summary-card position-relative"><i
                                                        class="bi bi-box-arrow-right summary-icon"></i>
                                                    <div class="summary-title">Saídas</div>
                                                    <div class="summary-value" id="totalSaidas">—</div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="summary-card position-relative"><i
                                                        class="bi bi-arrow-left-right summary-icon"></i>
                                                    <div class="summary-title">Saldo</div>
                                                    <div class="summary-value" id="saldoMovimentacao">—</div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="summary-card position-relative"><i
                                                        class="bi bi-currency-dollar summary-icon"></i>
                                                    <div class="summary-title">Valor Movimentado</div>
                                                    <div class="summary-value" id="valorMovimentado">—</div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0">Detalhamento da Movimentação</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="table-container">
                                                    <table class="table">
                                                        <thead>
                                                            <tr>
                                                                <th>Data</th>
                                                                <th>Produto</th>
                                                                <th>Tipo</th>
                                                                <th>Quantidade</th>
                                                                <th>Responsável</th>
                                                                <th class="text-end">Valor</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody id="tabelaMovimentacaoBody"></tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>



                            </div><!-- /tab-content estoque -->
                        </div>
                    </div>
                </div>

            </div><!-- /tab-content principal -->
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="../assets/js/sidebar.js"></script>
    <script src="../assets/js/relatorio.js"></script>
</body>

</html>